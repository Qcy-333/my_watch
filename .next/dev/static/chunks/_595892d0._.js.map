{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/1_my_projects/my_watch/constants.ts"],"sourcesContent":["import { PlatformConfig, PlatformType, ContentRecord } from './types';\nimport { Youtube, FileText, Smartphone, Globe, Tv } from 'lucide-react';\n\n// --- F2. Platform Adapter Strategy ---\n// This is the core extensible configuration. To add a new platform, \n// just add a key here.\n\nexport const PLATFORM_REGISTRY: Record<PlatformType, PlatformConfig> = {\n  Bilibili: {\n    name: 'Bilibili',\n    icon: Tv,\n    primaryColor: '#FB7299',\n    bgColor: 'bg-pink-50',\n    generateLink: (url) => {\n      // Mock logic: Extract BV ID and create deep link\n      // In prod: const match = url.match(/(BV\\w+)/);\n      // return match ? `bilibili://video/${match[1]}` : url;\n      return url; // Fallback for web demo\n    }\n  },\n  XiaoHongShu: {\n    name: 'RedNote',\n    icon: Smartphone, // Approximating XHS icon\n    primaryColor: '#FF2442',\n    bgColor: 'bg-red-50',\n    generateLink: (url) => {\n      // Logic to trigger XHS app scheme\n      return url; \n    }\n  },\n  YouTube: {\n    name: 'YouTube',\n    icon: Youtube,\n    primaryColor: '#FF0000',\n    bgColor: 'bg-red-50',\n    generateLink: (url) => {\n      // Logic to trigger YouTube app scheme\n      return url; \n    }\n  },\n  Article: {\n    name: 'Article',\n    icon: FileText,\n    primaryColor: '#374151',\n    bgColor: 'bg-gray-100',\n    generateLink: (url) => url // Articles usually open in browser\n  },\n  Web: {\n    name: 'Web',\n    icon: Globe,\n    primaryColor: '#2563EB',\n    bgColor: 'bg-blue-50',\n    generateLink: (url) => url\n  }\n};\n\n// --- Mock Database (Lark Base) ---\n\nexport const MOCK_RECORDS: ContentRecord[] = [\n  {\n    id: '1',\n    title: 'Understanding React Server Components in 2025',\n    summary: 'A comprehensive guide to how RSCs change the data fetching paradigm, including examples with Next.js 15 and server actions.',\n    url: 'https://youtube.com/watch?v=12345',\n    platform: 'YouTube',\n    status: 'ToWatch',\n    tags: ['React', 'Frontend', 'Architecture'],\n    createdAt: new Date().toISOString(),\n  },\n  {\n    id: '2',\n    title: 'The Future of AI Agents: A Deep Dive into Autonomous Systems and their implications',\n    summary: 'Analyzing the shift from chat-based interfaces to agentic workflows. Covers key frameworks like LangChain and AutoGPT.',\n    url: 'https://bilibili.com/video/BV12345',\n    platform: 'Bilibili',\n    status: 'ToWatch',\n    tags: ['AI', 'TechTrends', 'LLM'],\n    createdAt: new Date(Date.now() - 86400000).toISOString(), // Yesterday\n  },\n  {\n    id: '3',\n    title: 'Minimalist Desk Setup Tour for Developers',\n    summary: 'Reviewing the latest ergonomic chairs, mechanical keyboards, and cable management solutions for a clean workspace.',\n    url: 'https://xhs.com/explore/12345',\n    platform: 'XiaoHongShu',\n    status: 'ToWatch',\n    tags: ['Lifestyle', 'Setup', 'Productivity'],\n    createdAt: new Date(Date.now() - 172800000).toISOString(), // 2 days ago\n  },\n  {\n    id: '4',\n    title: 'Why TypeScript is winning the enterprise',\n    summary: 'A statistical analysis of type safety reducing production bugs by 15% in large scale applications.',\n    url: 'https://medium.com/stories/ts-winning',\n    platform: 'Article',\n    status: 'ToWatch',\n    tags: ['TypeScript', 'Coding'],\n    createdAt: new Date(Date.now() - 200000).toISOString(),\n  },\n  {\n    id: '5',\n    title: 'Advanced Tailwind CSS Techniques',\n    summary: 'Mastering arbitrary values, complex variants, and plugin creation to speed up your styling workflow.',\n    url: 'https://bilibili.com/video/BV67890',\n    platform: 'Bilibili',\n    status: 'ToWatch',\n    tags: ['CSS', 'Frontend'],\n    createdAt: new Date().toISOString(),\n  }\n];"],"names":[],"mappings":";;;;;;AACA;AAAA;AAAA;AAAA;AAAA;;AAMO,MAAM,oBAA0D;IACrE,UAAU;QACR,MAAM;QACN,MAAM,uMAAE;QACR,cAAc;QACd,SAAS;QACT,cAAc,CAAC;YACb,iDAAiD;YACjD,+CAA+C;YAC/C,uDAAuD;YACvD,OAAO,KAAK,wBAAwB;QACtC;IACF;IACA,aAAa;QACX,MAAM;QACN,MAAM,+NAAU;QAChB,cAAc;QACd,SAAS;QACT,cAAc,CAAC;YACb,kCAAkC;YAClC,OAAO;QACT;IACF;IACA,SAAS;QACP,MAAM;QACN,MAAM,sNAAO;QACb,cAAc;QACd,SAAS;QACT,cAAc,CAAC;YACb,sCAAsC;YACtC,OAAO;QACT;IACF;IACA,SAAS;QACP,MAAM;QACN,MAAM,6NAAQ;QACd,cAAc;QACd,SAAS;QACT,cAAc,CAAC,MAAQ,IAAI,mCAAmC;IAChE;IACA,KAAK;QACH,MAAM;QACN,MAAM,gNAAK;QACX,cAAc;QACd,SAAS;QACT,cAAc,CAAC,MAAQ;IACzB;AACF;AAIO,MAAM,eAAgC;IAC3C;QACE,IAAI;QACJ,OAAO;QACP,SAAS;QACT,KAAK;QACL,UAAU;QACV,QAAQ;QACR,MAAM;YAAC;YAAS;YAAY;SAAe;QAC3C,WAAW,IAAI,OAAO,WAAW;IACnC;IACA;QACE,IAAI;QACJ,OAAO;QACP,SAAS;QACT,KAAK;QACL,UAAU;QACV,QAAQ;QACR,MAAM;YAAC;YAAM;YAAc;SAAM;QACjC,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,UAAU,WAAW;IACxD;IACA;QACE,IAAI;QACJ,OAAO;QACP,SAAS;QACT,KAAK;QACL,UAAU;QACV,QAAQ;QACR,MAAM;YAAC;YAAa;YAAS;SAAe;QAC5C,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,WAAW,WAAW;IACzD;IACA;QACE,IAAI;QACJ,OAAO;QACP,SAAS;QACT,KAAK;QACL,UAAU;QACV,QAAQ;QACR,MAAM;YAAC;YAAc;SAAS;QAC9B,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,QAAQ,WAAW;IACtD;IACA;QACE,IAAI;QACJ,OAAO;QACP,SAAS;QACT,KAAK;QACL,UAAU;QACV,QAAQ;QACR,MAAM;YAAC;YAAO;SAAW;QACzB,WAAW,IAAI,OAAO,WAAW;IACnC;CACD"}},
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"sources":["file:///E:/1_my_projects/my_watch/components/ContentCard.tsx"],"sourcesContent":["import React from 'react';\nimport { ContentRecord } from '../types';\nimport { PLATFORM_REGISTRY } from '../constants';\nimport { Clock, Plus, Check, Trash2 } from 'lucide-react';\n\ninterface ContentCardProps {\n  record: ContentRecord;\n  isSelected: boolean;\n  onToggleQueue: (id: string) => void;\n  onPlayNow: (record: ContentRecord) => void;\n  onDelete: (id: string) => void;\n}\n\nexport const ContentCard: React.FC<ContentCardProps> = ({ \n  record, \n  isSelected, \n  onToggleQueue,\n  onPlayNow,\n  onDelete\n}) => {\n  const platformConfig = PLATFORM_REGISTRY[record.platform] || PLATFORM_REGISTRY.Web;\n  const Icon = platformConfig.icon;\n\n  // Relative time formatter\n  const getTimeAgo = (dateStr: string) => {\n    const diff = Date.now() - new Date(dateStr).getTime();\n    const hours = Math.floor(diff / (1000 * 60 * 60));\n    if (hours < 24) return 'Today';\n    if (hours < 48) return 'Yesterday';\n    return `${Math.floor(hours / 24)}d ago`;\n  };\n\n  return (\n    <div \n      className={`\n        group relative w-full p-5 rounded-2xl border transition-all duration-300 ease-out\n        ${isSelected \n          ? 'bg-black border-black text-white shadow-xl scale-[1.01]' \n          : 'bg-white border-gray-100 hover:border-gray-300 hover:shadow-md text-gray-900'\n        }\n      `}\n    >\n      <div className=\"flex items-start gap-4\">\n        {/* Platform Icon Indicator */}\n        <div \n          className={`\n            flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center\n            ${isSelected ? 'bg-gray-800' : platformConfig.bgColor}\n          `}\n        >\n          <Icon \n            size={22} \n            className={isSelected ? 'text-white' : ''}\n            style={{ color: isSelected ? undefined : platformConfig.primaryColor }} \n          />\n        </div>\n\n        {/* Content Metadata */}\n        <div className=\"flex-grow min-w-0 cursor-pointer\" onClick={() => onPlayNow(record)}>\n          {/* Header Row: Platform & Time */}\n          <div className=\"flex items-center gap-2 mb-2\">\n            <span className={`text-[10px] font-bold tracking-wider uppercase px-2 py-0.5 rounded-full ${isSelected ? 'bg-gray-800 text-gray-300' : 'bg-gray-100 text-gray-500'}`}>\n              {platformConfig.name}\n            </span>\n            <span className={`text-xs flex items-center gap-1 ${isSelected ? 'text-gray-400' : 'text-gray-400'}`}>\n              <Clock size={10} />\n              {getTimeAgo(record.createdAt)}\n            </span>\n          </div>\n          \n          {/* Title - Larger, Max 2 lines */}\n          <h3 className={`text-lg font-bold leading-tight line-clamp-2 mb-1.5 ${isSelected ? 'text-white' : 'text-gray-900'}`}>\n            {record.title}\n          </h3>\n\n          {/* Summary - Smaller, Max 2 lines */}\n          <p className={`text-sm leading-relaxed line-clamp-2 mb-3 ${isSelected ? 'text-gray-400' : 'text-gray-500'}`}>\n            {record.summary || \"No summary available for this content.\"}\n          </p>\n          \n          {/* Tags - Multi-row/Wrap */}\n          <div className=\"flex flex-wrap gap-2\">\n            {record.tags.map(tag => (\n              <span \n                key={tag} \n                className={`text-xs font-medium px-2 py-0.5 rounded-md ${\n                  isSelected \n                    ? 'bg-gray-800 text-gray-300' \n                    : 'bg-gray-100 text-gray-600'\n                }`}\n              >\n                #{tag}\n              </span>\n            ))}\n          </div>\n        </div>\n\n        {/* Actions Column */}\n        <div className=\"flex flex-col gap-2 pt-1\">\n          {/* Queue Action Button */}\n          <button \n            onClick={(e) => {\n              e.stopPropagation();\n              onToggleQueue(record.id);\n            }}\n            title={isSelected ? \"Remove from queue\" : \"Add to queue\"}\n            className={`\n              flex-shrink-0 w-9 h-9 rounded-full flex items-center justify-center border transition-all\n              ${isSelected \n                ? 'bg-white border-white text-black hover:bg-gray-200' \n                : 'bg-transparent border-gray-200 text-gray-400 hover:border-black hover:text-black'\n              }\n            `}\n          >\n            {isSelected ? <Check size={18} strokeWidth={3} /> : <Plus size={18} />}\n          </button>\n\n          {/* Delete Action Button */}\n          <button \n            onClick={(e) => {\n              e.stopPropagation();\n              onDelete(record.id);\n            }}\n            title=\"Remove from list\"\n            className={`\n              flex-shrink-0 w-9 h-9 rounded-full flex items-center justify-center border transition-all opacity-0 group-hover:opacity-100 focus:opacity-100\n              ${isSelected \n                ? 'bg-transparent border-gray-700 text-gray-500 hover:text-red-400 hover:border-red-400' \n                : 'bg-transparent border-transparent text-gray-300 hover:text-red-500 hover:bg-red-50'\n              }\n            `}\n          >\n            <Trash2 size={16} />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;;;;AAUO,MAAM,cAA0C,CAAC,EACtD,MAAM,EACN,UAAU,EACV,aAAa,EACb,SAAS,EACT,QAAQ,EACT;IACC,MAAM,iBAAiB,iIAAiB,CAAC,OAAO,QAAQ,CAAC,IAAI,iIAAiB,CAAC,GAAG;IAClF,MAAM,OAAO,eAAe,IAAI;IAEhC,0BAA0B;IAC1B,MAAM,aAAa,CAAC;QAClB,MAAM,OAAO,KAAK,GAAG,KAAK,IAAI,KAAK,SAAS,OAAO;QACnD,MAAM,QAAQ,KAAK,KAAK,CAAC,OAAO,CAAC,OAAO,KAAK,EAAE;QAC/C,IAAI,QAAQ,IAAI,OAAO;QACvB,IAAI,QAAQ,IAAI,OAAO;QACvB,OAAO,GAAG,KAAK,KAAK,CAAC,QAAQ,IAAI,KAAK,CAAC;IACzC;IAEA,qBACE,6LAAC;QACC,WAAW,CAAC;;QAEV,EAAE,aACE,4DACA,+EACH;MACH,CAAC;kBAED,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBACC,WAAW,CAAC;;YAEV,EAAE,aAAa,gBAAgB,eAAe,OAAO,CAAC;UACxD,CAAC;8BAED,cAAA,6LAAC;wBACC,MAAM;wBACN,WAAW,aAAa,eAAe;wBACvC,OAAO;4BAAE,OAAO,aAAa,YAAY,eAAe,YAAY;wBAAC;;;;;;;;;;;8BAKzE,6LAAC;oBAAI,WAAU;oBAAmC,SAAS,IAAM,UAAU;;sCAEzE,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAK,WAAW,CAAC,wEAAwE,EAAE,aAAa,8BAA8B,6BAA6B;8CACjK,eAAe,IAAI;;;;;;8CAEtB,6LAAC;oCAAK,WAAW,CAAC,gCAAgC,EAAE,aAAa,kBAAkB,iBAAiB;;sDAClG,6LAAC,gNAAK;4CAAC,MAAM;;;;;;wCACZ,WAAW,OAAO,SAAS;;;;;;;;;;;;;sCAKhC,6LAAC;4BAAG,WAAW,CAAC,oDAAoD,EAAE,aAAa,eAAe,iBAAiB;sCAChH,OAAO,KAAK;;;;;;sCAIf,6LAAC;4BAAE,WAAW,CAAC,0CAA0C,EAAE,aAAa,kBAAkB,iBAAiB;sCACxG,OAAO,OAAO,IAAI;;;;;;sCAIrB,6LAAC;4BAAI,WAAU;sCACZ,OAAO,IAAI,CAAC,GAAG,CAAC,CAAA,oBACf,6LAAC;oCAEC,WAAW,CAAC,2CAA2C,EACrD,aACI,8BACA,6BACJ;;wCACH;wCACG;;mCAPG;;;;;;;;;;;;;;;;8BAcb,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;4BACC,SAAS,CAAC;gCACR,EAAE,eAAe;gCACjB,cAAc,OAAO,EAAE;4BACzB;4BACA,OAAO,aAAa,sBAAsB;4BAC1C,WAAW,CAAC;;cAEV,EAAE,aACE,uDACA,mFACH;YACH,CAAC;sCAEA,2BAAa,6LAAC,gNAAK;gCAAC,MAAM;gCAAI,aAAa;;;;;yFAAQ,6LAAC,6MAAI;gCAAC,MAAM;;;;;;;;;;;sCAIlE,6LAAC;4BACC,SAAS,CAAC;gCACR,EAAE,eAAe;gCACjB,SAAS,OAAO,EAAE;4BACpB;4BACA,OAAM;4BACN,WAAW,CAAC;;cAEV,EAAE,aACE,yFACA,qFACH;YACH,CAAC;sCAED,cAAA,6LAAC,uNAAM;gCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM1B;KA7Ha"}},
    {"offset": {"line": 354, "column": 0}, "map": {"version":3,"sources":["file:///E:/1_my_projects/my_watch/components/ReviewOverlay.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { ContentRecord } from '../types';\nimport { PLATFORM_REGISTRY } from '../constants';\nimport { \n  CheckCircle2, \n  Trash2, \n  PenLine, \n  Play, \n  SkipForward, \n  Home, \n  ArrowRight,\n  Clock,\n  RotateCcw\n} from 'lucide-react';\n\ninterface ReviewOverlayProps {\n  watchedRecord: ContentRecord;\n  nextRecord?: ContentRecord;\n  remainingCount: number;\n  onFeedback: (action: 'done' | 'trash' | 'note', note?: string) => void;\n  onPlayNext: () => void;\n  onSkipNext: () => void;\n  onExit: () => void;\n}\n\nexport const ReviewOverlay: React.FC<ReviewOverlayProps> = ({ \n  watchedRecord, \n  nextRecord,\n  remainingCount, \n  onFeedback,\n  onPlayNext,\n  onSkipNext,\n  onExit\n}) => {\n  const [feedbackGiven, setFeedbackGiven] = useState(\n    watchedRecord.status === 'Done' || watchedRecord.status === 'Trash'\n  );\n  const [showNoteInput, setShowNoteInput] = useState(false);\n  const [note, setNote] = useState('');\n\n  // Platforms\n  const currentPlatform = PLATFORM_REGISTRY[watchedRecord.platform] || PLATFORM_REGISTRY.Web;\n  const nextPlatform = nextRecord ? (PLATFORM_REGISTRY[nextRecord.platform] || PLATFORM_REGISTRY.Web) : null;\n  const CurrentIcon = currentPlatform.icon;\n  const NextIcon = nextPlatform?.icon;\n\n  // Actions\n  const handleAction = (action: 'done' | 'trash') => {\n    onFeedback(action);\n    setFeedbackGiven(true);\n  };\n\n  const handleSaveNote = () => {\n    if (note.trim()) {\n      onFeedback('note', note);\n      setFeedbackGiven(true);\n      setShowNoteInput(false);\n    }\n  };\n\n  // Auto-focus note input\n  useEffect(() => {\n    if (showNoteInput) {\n      document.getElementById('note-input')?.focus();\n    }\n  }, [showNoteInput]);\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex flex-col bg-white animate-in fade-in duration-300\">\n      \n      {/* --- SECTION A: FEEDBACK (Top Half) --- */}\n      <div className={`\n        relative flex flex-col items-center justify-center p-6 transition-all duration-500 ease-in-out\n        ${feedbackGiven ? 'flex-[0.4] bg-gray-50 border-b border-gray-200' : 'flex-1 bg-white'}\n      `}>\n        \n        {/* Content Details */}\n        <div className={`text-center max-w-md mx-auto transition-all duration-500 ${feedbackGiven ? 'scale-90 opacity-60' : 'scale-100'}`}>\n          <div className=\"flex items-center justify-center gap-2 mb-4\">\n            <div className={`w-8 h-8 rounded-lg flex items-center justify-center ${currentPlatform.bgColor}`}>\n              <CurrentIcon size={16} style={{ color: currentPlatform.primaryColor }} />\n            </div>\n            <span className=\"text-xs font-bold uppercase tracking-widest text-gray-400\">Just Watched</span>\n          </div>\n          \n          <h2 className={`font-bold text-gray-900 leading-tight mb-2 ${feedbackGiven ? 'text-xl line-clamp-1' : 'text-2xl'}`}>\n            {watchedRecord.title}\n          </h2>\n          \n          {!feedbackGiven && (\n            <p className=\"text-gray-500 text-sm line-clamp-2 px-4\">\n              {watchedRecord.summary || \"No summary available.\"}\n            </p>\n          )}\n        </div>\n\n        {/* Feedback Actions (Hidden if Note Mode is active) */}\n        {!showNoteInput && !feedbackGiven && (\n          <div className=\"flex items-center gap-4 mt-8 w-full max-w-sm animate-in slide-in-from-bottom-4 duration-500 delay-100\">\n            <button \n              onClick={() => handleAction('trash')}\n              className=\"flex-1 flex flex-col items-center gap-2 p-4 rounded-2xl border-2 border-transparent hover:bg-red-50 hover:border-red-100 group transition-all\"\n            >\n              <div className=\"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center group-hover:bg-red-200 transition-colors\">\n                <Trash2 size={24} className=\"text-gray-500 group-hover:text-red-600\" />\n              </div>\n              <span className=\"text-xs font-bold text-gray-400 group-hover:text-red-500 uppercase tracking-wider\">Delete</span>\n            </button>\n\n            <button \n              onClick={() => handleAction('done')}\n              className=\"flex-[1.5] flex flex-col items-center gap-2 p-4 rounded-2xl bg-black text-white shadow-xl shadow-black/20 hover:scale-105 active:scale-95 transition-all\"\n            >\n              <div className=\"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center\">\n                <CheckCircle2 size={28} className=\"text-white\" />\n              </div>\n              <span className=\"text-xs font-bold uppercase tracking-wider\">Mark Done</span>\n            </button>\n\n            <button \n              onClick={() => setShowNoteInput(true)}\n              className=\"flex-1 flex flex-col items-center gap-2 p-4 rounded-2xl border-2 border-transparent hover:bg-blue-50 hover:border-blue-100 group transition-all\"\n            >\n              <div className=\"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center group-hover:bg-blue-200 transition-colors\">\n                <PenLine size={24} className=\"text-gray-500 group-hover:text-blue-600\" />\n              </div>\n              <span className=\"text-xs font-bold text-gray-400 group-hover:text-blue-500 uppercase tracking-wider\">Note</span>\n            </button>\n          </div>\n        )}\n\n        {/* Note Input Overlay */}\n        {showNoteInput && (\n          <div className=\"absolute inset-0 z-10 bg-white/95 backdrop-blur-sm flex flex-col items-center justify-center p-6 animate-in fade-in zoom-in-95\">\n            <h3 className=\"text-lg font-bold mb-4\">Add a Note</h3>\n            <textarea\n              id=\"note-input\"\n              value={note}\n              onChange={(e) => setNote(e.target.value)}\n              className=\"w-full max-w-sm p-4 bg-gray-50 rounded-xl border border-gray-200 focus:ring-2 focus:ring-black focus:border-transparent outline-none resize-none mb-4 text-sm\"\n              rows={4}\n              placeholder=\"What did you learn?\"\n            />\n            <div className=\"flex gap-3 w-full max-w-sm\">\n              <button \n                onClick={() => setShowNoteInput(false)}\n                className=\"flex-1 py-3 text-gray-500 font-medium hover:text-gray-800\"\n              >\n                Cancel\n              </button>\n              <button \n                onClick={handleSaveNote}\n                className=\"flex-1 py-3 bg-black text-white rounded-xl font-bold shadow-lg\"\n              >\n                Save & Done\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Feedback Success State */}\n        {feedbackGiven && (\n          <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 flex items-center gap-2 text-green-600 font-medium animate-in slide-in-from-bottom-2 fade-in\">\n            <CheckCircle2 size={16} />\n            <span className=\"text-sm\">Marked as done</span>\n          </div>\n        )}\n      </div>\n\n      {/* --- SECTION B: FLOW (Bottom Half) --- */}\n      <div className={`\n        flex-[0.6] bg-white border-t border-gray-100 p-6 flex flex-col items-center justify-center gap-6 transition-all duration-500\n        ${!feedbackGiven ? 'opacity-30 pointer-events-none grayscale' : 'opacity-100'}\n      `}>\n        \n        {nextRecord ? (\n          <>\n            <div className=\"w-full max-w-sm\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <span className=\"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2\">\n                  <ArrowRight size={14} /> Up Next\n                </span>\n                <span className=\"text-xs font-medium text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full\">\n                  {remainingCount} in queue\n                </span>\n              </div>\n              \n              <div className=\"bg-white border border-gray-200 rounded-2xl p-4 shadow-sm hover:shadow-md transition-shadow\">\n                <div className=\"flex items-start gap-3\">\n                  <div className={`shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${nextPlatform?.bgColor}`}>\n                    {NextIcon && <NextIcon size={18} style={{ color: nextPlatform?.primaryColor }} />}\n                  </div>\n                  <div className=\"min-w-0\">\n                    <h4 className=\"font-bold text-gray-900 leading-tight line-clamp-2 mb-1\">\n                      {nextRecord.title}\n                    </h4>\n                    <div className=\"flex items-center gap-3 text-xs text-gray-500\">\n                      <span className=\"flex items-center gap-1\"><Clock size={10} /> 5 min</span>\n                      <span className=\"bg-gray-100 px-1.5 py-0.5 rounded text-gray-600\">\n                         {nextPlatform?.name}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex flex-col w-full max-w-sm gap-3\">\n              <button \n                onClick={onPlayNext}\n                className=\"w-full py-4 bg-black text-white rounded-2xl font-bold text-lg flex items-center justify-center gap-3 hover:scale-[1.02] active:scale-95 transition-all shadow-xl shadow-black/10\"\n              >\n                <Play size={20} fill=\"currentColor\" /> Play Now\n              </button>\n              \n              <div className=\"grid grid-cols-2 gap-3\">\n                <button \n                  onClick={onSkipNext}\n                  className=\"py-3 bg-gray-50 text-gray-600 rounded-xl font-medium text-sm flex items-center justify-center gap-2 hover:bg-gray-100 transition-colors\"\n                >\n                  <SkipForward size={16} /> Skip This\n                </button>\n                <button \n                  onClick={onExit}\n                  className=\"py-3 bg-white border border-gray-200 text-gray-500 rounded-xl font-medium text-sm flex items-center justify-center gap-2 hover:bg-gray-50 transition-colors\"\n                >\n                  <Home size={16} /> Dashboard\n                </button>\n              </div>\n            </div>\n          </>\n        ) : (\n          <div className=\"text-center max-w-xs\">\n            <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4 text-gray-400\">\n              <RotateCcw size={24} />\n            </div>\n            <h3 className=\"text-lg font-bold text-gray-900 mb-2\">You're all caught up!</h3>\n            <p className=\"text-sm text-gray-500 mb-6\">Queue is empty. Go back to the dashboard to find more content.</p>\n            <button \n              onClick={onExit}\n              className=\"w-full py-3 bg-black text-white rounded-xl font-bold\"\n            >\n              Back to Dashboard\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 951, "column": 0}, "map": {"version":3,"sources":["file:///E:/1_my_projects/my_watch/components/QueueDrawer.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { ContentRecord } from '../types';\nimport { PLATFORM_REGISTRY } from '../constants';\nimport { X, GripVertical, Play, Trash2 } from 'lucide-react';\n\ninterface QueueDrawerProps {\n  queueItems: ContentRecord[];\n  onRemove: (id: string) => void;\n  onReorder: (startIndex: number, endIndex: number) => void;\n  onPlay: () => void;\n  onClose: () => void;\n}\n\nexport const QueueDrawer: React.FC<QueueDrawerProps> = ({\n  queueItems,\n  onRemove,\n  onReorder,\n  onPlay,\n  onClose\n}) => {\n  const [draggedIndex, setDraggedIndex] = useState<number | null>(null);\n\n  const handleDragStart = (e: React.DragEvent, index: number) => {\n    setDraggedIndex(index);\n    e.dataTransfer.effectAllowed = \"move\";\n    // Invisible drag image or default\n  };\n\n  const handleDragOver = (e: React.DragEvent, index: number) => {\n    e.preventDefault();\n    if (draggedIndex === null || draggedIndex === index) return;\n    \n    // Perform swap visually immediately or just wait for drop\n    // For simple UX, we might just allow drop.\n  };\n\n  const handleDrop = (e: React.DragEvent, index: number) => {\n    e.preventDefault();\n    if (draggedIndex === null) return;\n    onReorder(draggedIndex, index);\n    setDraggedIndex(null);\n  };\n\n  return (\n    <>\n      {/* Backdrop */}\n      <div \n        className=\"fixed inset-0 z-40 bg-gray-900/20 backdrop-blur-sm transition-opacity\"\n        onClick={onClose}\n      />\n\n      {/* Drawer Panel */}\n      <div className=\"fixed bottom-0 left-0 right-0 z-50 bg-white rounded-t-3xl shadow-2xl transform transition-transform duration-300 ease-out max-h-[80vh] flex flex-col\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-100\">\n          <div>\n            <h2 className=\"text-lg font-bold text-gray-900\">Up Next</h2>\n            <p className=\"text-xs text-gray-500\">{queueItems.length} items in queue</p>\n          </div>\n          <div className=\"flex gap-2\">\n            <button \n              onClick={onPlay}\n              className=\"px-4 py-2 bg-black text-white rounded-full text-sm font-bold flex items-center gap-2 hover:bg-gray-800 transition-colors\"\n            >\n              <Play size={14} fill=\"currentColor\" /> Play All\n            </button>\n            <button \n              onClick={onClose}\n              className=\"p-2 bg-gray-100 text-gray-500 rounded-full hover:bg-gray-200 transition-colors\"\n            >\n              <X size={20} />\n            </button>\n          </div>\n        </div>\n\n        {/* List */}\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-2 min-h-[300px]\">\n          {queueItems.length === 0 ? (\n            <div className=\"h-full flex flex-col items-center justify-center text-gray-400 py-12\">\n              <p>Your queue is empty.</p>\n            </div>\n          ) : (\n            queueItems.map((item, index) => {\n              const platformConfig = PLATFORM_REGISTRY[item.platform] || PLATFORM_REGISTRY.Web;\n              const Icon = platformConfig.icon;\n              \n              return (\n                <div\n                  key={item.id}\n                  draggable\n                  onDragStart={(e) => handleDragStart(e, index)}\n                  onDragOver={(e) => handleDragOver(e, index)}\n                  onDrop={(e) => handleDrop(e, index)}\n                  className={`\n                    group flex items-center gap-3 p-3 bg-white border border-gray-200 rounded-xl select-none\n                    ${draggedIndex === index ? 'opacity-50 border-dashed border-gray-400' : 'hover:border-gray-300 hover:shadow-sm'}\n                    cursor-move active:cursor-grabbing\n                  `}\n                >\n                  {/* Drag Handle */}\n                  <div className=\"text-gray-300 cursor-grab active:cursor-grabbing\">\n                    <GripVertical size={16} />\n                  </div>\n\n                  {/* Icon */}\n                  <div className={`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${platformConfig.bgColor}`}>\n                    <Icon size={14} style={{ color: platformConfig.primaryColor }} />\n                  </div>\n\n                  {/* Title */}\n                  <div className=\"flex-grow min-w-0\">\n                    <h4 className=\"text-sm font-semibold text-gray-900 truncate\">\n                      {item.title}\n                    </h4>\n                  </div>\n\n                  {/* Remove Action */}\n                  <button \n                    onClick={(e) => {\n                      e.stopPropagation(); // prevent drag\n                      onRemove(item.id);\n                    }}\n                    className=\"p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors\"\n                    title=\"Remove from queue\"\n                  >\n                    <Trash2 size={16} />\n                  </button>\n                </div>\n              );\n            })\n          )}\n        </div>\n      </div>\n    </>\n  );\n};"],"names":[],"mappings":";;;;;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;;;;;;AAUO,MAAM,cAA0C,CAAC,EACtD,UAAU,EACV,QAAQ,EACR,SAAS,EACT,MAAM,EACN,OAAO,EACR;;IACC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAgB;IAEhE,MAAM,kBAAkB,CAAC,GAAoB;QAC3C,gBAAgB;QAChB,EAAE,YAAY,CAAC,aAAa,GAAG;IAC/B,kCAAkC;IACpC;IAEA,MAAM,iBAAiB,CAAC,GAAoB;QAC1C,EAAE,cAAc;QAChB,IAAI,iBAAiB,QAAQ,iBAAiB,OAAO;IAErD,0DAA0D;IAC1D,2CAA2C;IAC7C;IAEA,MAAM,aAAa,CAAC,GAAoB;QACtC,EAAE,cAAc;QAChB,IAAI,iBAAiB,MAAM;QAC3B,UAAU,cAAc;QACxB,gBAAgB;IAClB;IAEA,qBACE;;0BAEE,6LAAC;gBACC,WAAU;gBACV,SAAS;;;;;;0BAIX,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;;kDACC,6LAAC;wCAAG,WAAU;kDAAkC;;;;;;kDAChD,6LAAC;wCAAE,WAAU;;4CAAyB,WAAW,MAAM;4CAAC;;;;;;;;;;;;;0CAE1D,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCACC,SAAS;wCACT,WAAU;;0DAEV,6LAAC,6MAAI;gDAAC,MAAM;gDAAI,MAAK;;;;;;4CAAiB;;;;;;;kDAExC,6LAAC;wCACC,SAAS;wCACT,WAAU;kDAEV,cAAA,6LAAC,oMAAC;4CAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;kCAMf,6LAAC;wBAAI,WAAU;kCACZ,WAAW,MAAM,KAAK,kBACrB,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;0CAAE;;;;;;;;;;uEAGL,WAAW,GAAG,CAAC,CAAC,MAAM;4BACpB,MAAM,iBAAiB,iIAAiB,CAAC,KAAK,QAAQ,CAAC,IAAI,iIAAiB,CAAC,GAAG;4BAChF,MAAM,OAAO,eAAe,IAAI;4BAEhC,qBACE,6LAAC;gCAEC,SAAS;gCACT,aAAa,CAAC,IAAM,gBAAgB,GAAG;gCACvC,YAAY,CAAC,IAAM,eAAe,GAAG;gCACrC,QAAQ,CAAC,IAAM,WAAW,GAAG;gCAC7B,WAAW,CAAC;;oBAEV,EAAE,iBAAiB,QAAQ,6CAA6C,wCAAwC;;kBAElH,CAAC;;kDAGD,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC,yOAAY;4CAAC,MAAM;;;;;;;;;;;kDAItB,6LAAC;wCAAI,WAAW,CAAC,kEAAkE,EAAE,eAAe,OAAO,EAAE;kDAC3G,cAAA,6LAAC;4CAAK,MAAM;4CAAI,OAAO;gDAAE,OAAO,eAAe,YAAY;4CAAC;;;;;;;;;;;kDAI9D,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC;4CAAG,WAAU;sDACX,KAAK,KAAK;;;;;;;;;;;kDAKf,6LAAC;wCACC,SAAS,CAAC;4CACR,EAAE,eAAe,IAAI,eAAe;4CACpC,SAAS,KAAK,EAAE;wCAClB;wCACA,WAAU;wCACV,OAAM;kDAEN,cAAA,6LAAC,uNAAM;4CAAC,MAAM;;;;;;;;;;;;+BArCX,KAAK,EAAE;;;;;wBAyClB;;;;;;;;;;;;;;AAMZ;GA1Ha;KAAA"}},
    {"offset": {"line": 1205, "column": 0}, "map": {"version":3,"sources":["file:///E:/1_my_projects/my_watch/app/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useMemo, useEffect } from 'react';\nimport useSWR from 'swr';\nimport axios from 'axios';\nimport { MOCK_RECORDS, PLATFORM_REGISTRY } from '../constants';\nimport { ContentRecord } from '../types';\nimport { ContentCard } from '../components/ContentCard';\nimport { ReviewOverlay } from '../components/ReviewOverlay';\nimport { QueueDrawer } from '../components/QueueDrawer';\nimport { Search, Play, Layers, Sparkles, X, AlertTriangle } from 'lucide-react';\n\nconst fetcher = (url: string) => axios.get(url).then(res => res.data);\n\nexport default function Home() {\n  // --- State ---\n  // Initialize with empty or MOCK_RECORDS, will be replaced by API data\n  const [records, setRecords] = useState<ContentRecord[]>([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedTags, setSelectedTags] = useState<Set<string>>(new Set());\n  \n  // Queue is now an ordered array of IDs\n  const [queueIds, setQueueIds] = useState<string[]>([]);\n  const [isQueueOpen, setIsQueueOpen] = useState(false);\n  \n  // The Loop State\n  const [activeRecordId, setActiveRecordId] = useState<string | null>(null);\n  const [isReviewing, setIsReviewing] = useState(false);\n\n  // Delete Confirmation State\n  const [deleteCandidateId, setDeleteCandidateId] = useState<string | null>(null);\n\n  // --- Data Fetching ---\n  const { data: serverRecords, error, isLoading } = useSWR('/api/videos', fetcher);\n\n  useEffect(() => {\n    if (serverRecords && Array.isArray(serverRecords)) {\n      setRecords(serverRecords);\n    }\n  }, [serverRecords]);\n\n  // --- Persistence ---\n  useEffect(() => {\n    const saved = localStorage.getItem('cf_queue_ids');\n    if (saved) {\n      try {\n        setQueueIds(JSON.parse(saved));\n      } catch (e) {\n        console.error(\"Failed to parse queue\", e);\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem('cf_queue_ids', JSON.stringify(queueIds));\n  }, [queueIds]);\n\n  // --- Derived State ---\n  const filteredRecords = useMemo(() => {\n    return records\n      .filter(r => r.status === 'ToWatch')\n      .filter(r => {\n        const matchesSearch = r.title.toLowerCase().includes(searchQuery.toLowerCase());\n        const matchesTags = selectedTags.size === 0 || r.tags.some(tag => selectedTags.has(tag));\n        return matchesSearch && matchesTags;\n      })\n      .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n  }, [records, searchQuery, selectedTags]);\n\n  const allTags = useMemo(() => {\n    const tags = new Set<string>();\n    records.forEach(r => r.tags.forEach(t => tags.add(t)));\n    return Array.from(tags);\n  }, [records]);\n\n  // The record currently being reviewed (Just Watched)\n  const activeRecord = useMemo(() => \n    records.find(r => r.id === activeRecordId), \n  [records, activeRecordId]);\n\n  // Resolve full objects for queue items, preserving order\n  const queueRecords = useMemo(() => {\n    return queueIds.map(id => records.find(r => r.id === id)).filter(Boolean) as ContentRecord[];\n  }, [queueIds, records]);\n\n  // The record that is effectively \"Next\" in the queue\n  const nextRecord = useMemo(() => {\n    if (queueIds.length === 0) return undefined;\n    \n    // If the active record is at the top of the queue, next is index 1\n    if (queueIds[0] === activeRecordId) {\n      return records.find(r => r.id === queueIds[1]);\n    }\n    // If active record is not in queue (or already removed), next is index 0\n    return records.find(r => r.id === queueIds[0]);\n  }, [queueIds, activeRecordId, records]);\n\n  // --- Handlers ---\n\n  const handleToggleQueue = (id: string) => {\n    setQueueIds(prev => {\n      if (prev.includes(id)) {\n        return prev.filter(item => item !== id);\n      } else {\n        return [...prev, id];\n      }\n    });\n  };\n\n  const handleRemoveFromQueue = (id: string) => {\n    setQueueIds(prev => prev.filter(item => item !== id));\n  };\n\n  const handleReorderQueue = (fromIndex: number, toIndex: number) => {\n    setQueueIds(prev => {\n      const newQueue = [...prev];\n      const [movedItem] = newQueue.splice(fromIndex, 1);\n      newQueue.splice(toIndex, 0, movedItem);\n      return newQueue;\n    });\n  };\n\n  const handleToggleTag = (tag: string) => {\n    const newTags = new Set(selectedTags);\n    if (newTags.has(tag)) {\n      newTags.delete(tag);\n    } else {\n      newTags.add(tag);\n    }\n    setSelectedTags(newTags);\n  };\n\n  // --- Delete Logic ---\n  const handleRequestDelete = (id: string) => {\n    setDeleteCandidateId(id);\n  };\n\n  const handleConfirmDelete = async () => {\n    if (!deleteCandidateId) return;\n    \n    const idToDelete = deleteCandidateId;\n    \n    // Optimistic Update\n    setRecords(prev => prev.map(r => r.id === idToDelete ? { ...r, status: 'Trash' } : r));\n    setQueueIds(prev => prev.filter(item => item !== idToDelete));\n    setDeleteCandidateId(null);\n\n    // API Call\n    try {\n      await axios.patch(`/api/videos/${idToDelete}`, { status: 'Trash' });\n    } catch (e) {\n      console.error(\"Failed to delete\", e);\n      // Optional: Rollback logic here\n    }\n  };\n\n  // --- The Loop Flow Control ---\n\n  const handleStartFlow = () => {\n    if (queueIds.length === 0) return;\n    setIsQueueOpen(false);\n    const firstId = queueIds[0];\n    launchRecord(firstId);\n  };\n\n  const launchRecord = (id: string) => {\n    const record = records.find(r => r.id === id);\n    if (!record) return;\n\n    // 1. Set as Active\n    setActiveRecordId(id);\n    setIsReviewing(true);\n    \n    // 2. Open Deep Link\n    const strategy = PLATFORM_REGISTRY[record.platform] || PLATFORM_REGISTRY.Web;\n    const deepLink = strategy.generateLink(record.url);\n    window.open(deepLink, '_blank');\n  };\n\n  // ACTION: Feedback on TOP section\n  const handleFeedback = async (action: 'done' | 'trash' | 'note', note?: string) => {\n    if (!activeRecordId) return;\n\n    // Optimistic Update\n    setRecords(prev => prev.map(r => {\n      if (r.id === activeRecordId) {\n        if (action === 'trash') return { ...r, status: 'Trash' };\n        // Done or Note implies Done\n        return { ...r, status: 'Done', notes: note }; \n      }\n      return r;\n    }));\n\n    // Remove from Queue immediately\n    setQueueIds(prev => prev.filter(id => id !== activeRecordId));\n\n    // API Call\n    try {\n      await axios.patch(`/api/videos/${activeRecordId}`, { \n        status: action === 'trash' ? 'Trash' : 'Done',\n        note \n      });\n    } catch (e) {\n      console.error(\"Failed to update status\", e);\n    }\n  };\n\n  // ACTION: Skip on BOTTOM section\n  const handleSkipNext = () => {\n    if (queueIds.length <= 1) return;\n\n    setQueueIds(prev => {\n      const [first, ...rest] = prev;\n      return [...rest, first];\n    });\n  };\n\n  // ACTION: Play on BOTTOM section\n  const handlePlayNext = () => {\n    if (!nextRecord) return;\n    launchRecord(nextRecord.id);\n  };\n\n  const handleCloseOverlay = () => {\n    setIsReviewing(false);\n    setActiveRecordId(null);\n    localStorage.removeItem('cf_last_played_id');\n  };\n\n  // --- Render ---\n\n  if (isLoading && records.length === 0) {\n    return (\n      <div className=\"min-h-screen bg-[#F9FAFB] flex items-center justify-center\">\n        <div className=\"flex flex-col items-center gap-4\">\n           <div className=\"w-8 h-8 border-4 border-black border-t-transparent rounded-full animate-spin\"></div>\n           <p className=\"text-gray-500 text-sm\">Loading your commute list...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error && records.length === 0) {\n    return (\n       <div className=\"min-h-screen bg-[#F9FAFB] flex items-center justify-center\">\n        <div className=\"text-center\">\n           <AlertTriangle className=\"w-12 h-12 text-red-500 mx-auto mb-4\" />\n           <h3 className=\"text-lg font-bold\">Failed to load content</h3>\n           <p className=\"text-gray-500 mb-4\">{error.message || \"Could not connect to server\"}</p>\n           <button onClick={() => window.location.reload()} className=\"bg-black text-white px-4 py-2 rounded-lg\">Retry</button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-[#F9FAFB] pb-32\">\n      {/* Delete Confirmation Modal */}\n      {deleteCandidateId && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-gray-900/40 backdrop-blur-sm p-4 animate-in fade-in duration-200\">\n          <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-sm p-6 transform transition-all scale-100\">\n            <div className=\"flex flex-col items-center text-center\">\n              <div className=\"w-12 h-12 bg-red-50 rounded-full flex items-center justify-center mb-4\">\n                <AlertTriangle className=\"text-red-500 w-6 h-6\" />\n              </div>\n              <h3 className=\"text-lg font-bold text-gray-900\">Delete Content?</h3>\n              <p className=\"text-sm text-gray-500 mt-2 mb-6\">\n                Are you sure you want to remove this from your library? This action cannot be undone.\n              </p>\n              <div className=\"flex gap-3 w-full\">\n                <button \n                  onClick={() => setDeleteCandidateId(null)}\n                  className=\"flex-1 py-2.5 bg-white border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button \n                  onClick={handleConfirmDelete}\n                  className=\"flex-1 py-2.5 bg-red-600 text-white font-medium rounded-xl hover:bg-red-700 transition-colors shadow-lg shadow-red-200\"\n                >\n                  Delete\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Review Overlay (The Loop) */}\n      {isReviewing && activeRecord && (\n        <ReviewOverlay \n          key={activeRecord.id}\n          watchedRecord={activeRecord}\n          nextRecord={nextRecord}\n          remainingCount={Math.max(0, queueIds.length - (queueIds.includes(activeRecord.id) ? 1 : 0))}\n          onFeedback={handleFeedback}\n          onPlayNext={handlePlayNext}\n          onSkipNext={handleSkipNext}\n          onExit={handleCloseOverlay}\n        />\n      )}\n\n      {/* Queue Drawer */}\n      {isQueueOpen && (\n        <QueueDrawer \n          queueItems={queueRecords}\n          onRemove={handleRemoveFromQueue}\n          onReorder={handleReorderQueue}\n          onPlay={handleStartFlow}\n          onClose={() => setIsQueueOpen(false)}\n        />\n      )}\n\n      {/* Header */}\n      <header className=\"sticky top-0 z-30 bg-white/80 backdrop-blur-md border-b border-gray-200\">\n        <div className=\"max-w-2xl mx-auto px-4 py-4\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-8 h-8 bg-black rounded-lg flex items-center justify-center shadow-sm\">\n                <Sparkles className=\"text-white w-4 h-4\" />\n              </div>\n              <span className=\"font-semibold text-lg tracking-tight text-gray-900\">CommuteFlow</span>\n            </div>\n            <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 border border-gray-200\" /> \n          </div>\n\n          <div className=\"relative group\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-black transition-colors\" size={18} />\n            <input \n              type=\"text\" \n              placeholder=\"Ask AI or search...\" \n              className=\"w-full bg-gray-50 border border-gray-200 rounded-xl py-3 pl-10 pr-4 outline-none focus:ring-2 focus:ring-black/5 focus:border-black transition-all placeholder:text-gray-400 text-sm\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n            />\n          </div>\n        </div>\n      </header>\n\n      {/* Multi-select Filters */}\n      <div className=\"max-w-2xl mx-auto px-4 py-6\">\n        <div className=\"flex flex-wrap items-center gap-2 pb-2\">\n          <button \n            onClick={() => setSelectedTags(new Set())}\n            className={`px-4 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-colors border ${selectedTags.size === 0 ? 'bg-black text-white border-black' : 'bg-white text-gray-600 border-gray-200 hover:border-gray-300'}`}\n          >\n            All\n          </button>\n          {allTags.map(tag => {\n            const isActive = selectedTags.has(tag);\n            return (\n              <button \n                key={tag}\n                onClick={() => handleToggleTag(tag)}\n                className={`\n                  px-4 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-all border\n                  ${isActive \n                    ? 'bg-black text-white border-black shadow-md' \n                    : 'bg-white text-gray-600 border-gray-200 hover:border-gray-300'\n                  }\n                `}\n              >\n                #{tag}\n              </button>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Main Stream */}\n      <main className=\"max-w-2xl mx-auto px-4 flex flex-col gap-4\">\n        {filteredRecords.length === 0 ? (\n          <div className=\"text-center py-20 text-gray-400\">\n            <Layers className=\"mx-auto mb-3 w-12 h-12 opacity-20\" />\n            <p>No content found.</p>\n            {selectedTags.size > 0 && (\n              <button onClick={() => setSelectedTags(new Set())} className=\"text-sm text-black underline mt-2\">Clear filters</button>\n            )}\n          </div>\n        ) : (\n          filteredRecords.map(record => (\n            <ContentCard \n              key={record.id} \n              record={record} \n              isSelected={queueIds.includes(record.id)}\n              onToggleQueue={handleToggleQueue}\n              onPlayNow={() => launchRecord(record.id)}\n              onDelete={handleRequestDelete}\n            />\n          ))\n        )}\n      </main>\n\n      {/* Sticky Bottom Player (Queue Control) */}\n      <div className=\"fixed bottom-0 left-0 right-0 z-30 bg-gradient-to-t from-white via-white/95 to-transparent pt-12 pb-8 px-4 pointer-events-none\">\n        <div className=\"max-w-2xl mx-auto pointer-events-auto\">\n          {queueIds.length > 0 && !isQueueOpen && (\n            <div \n              onClick={() => setIsQueueOpen(true)}\n              className=\"bg-black/90 backdrop-blur-md text-white rounded-2xl p-2 pl-3 pr-2 flex items-center justify-between shadow-2xl shadow-black/20 animate-in slide-in-from-bottom-10 duration-300 ring-1 ring-white/10 cursor-pointer group hover:bg-black transition-colors\"\n            >\n              {/* Left: Content Info of First Item */}\n              <div className=\"flex items-center gap-3 flex-1 min-w-0 mr-2\">\n                {(() => {\n                   const firstItem = queueRecords[0];\n                   const platformConfig = firstItem ? (PLATFORM_REGISTRY[firstItem.platform] || PLATFORM_REGISTRY.Web) : null;\n                   const Icon = platformConfig?.icon;\n                   \n                   return (\n                     <>\n                        <div className={`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${platformConfig ? 'bg-white/10' : 'bg-gray-800'}`}>\n                           {Icon && <Icon size={18} className=\"text-gray-200\" />}\n                        </div>\n                        <div className=\"flex flex-col min-w-0\">\n                           <div className=\"flex items-center gap-2\">\n                             <span className=\"text-[10px] font-bold text-gray-400 uppercase tracking-widest\">Up Next</span>\n                             <span className=\"text-[10px] bg-white/20 px-1.5 rounded-full text-gray-300\">{queueIds.length}</span>\n                           </div>\n                           <span className=\"font-semibold text-sm truncate text-white block\">\n                             {firstItem?.title || \"Unknown Content\"}\n                           </span>\n                        </div>\n                     </>\n                   );\n                })()}\n              </div>\n              \n              {/* Right: Actions */}\n              <div className=\"flex items-center gap-1 shrink-0\">\n                <button \n                  onClick={(e) => {\n                    e.stopPropagation();\n                    setQueueIds([]);\n                  }}\n                  className=\"w-10 h-10 flex items-center justify-center text-gray-500 hover:text-white transition-colors rounded-xl hover:bg-white/10\"\n                  title=\"Clear Queue\"\n                >\n                  <X size={18} />\n                </button>\n\n                <button \n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleStartFlow();\n                  }}\n                  className=\"bg-white text-black px-4 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-gray-200 transition-colors active:scale-95 shadow-lg ml-1\"\n                >\n                  <Play size={16} fill=\"currentColor\" /> Play\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}